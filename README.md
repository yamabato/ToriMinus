# ToriMinus

## 概要

　本プログラムは、数年前に作成されたTori-なる言語をC言語を用いて再実装したものである。

　Tori-は実装の簡便さを特に考慮して設計され、利便性等はほぼ顧慮されていない。本プログラムにおいては当時の仕様をそのまま再現している。

## 特徴

　Tori-は上述の通り、設計において実装の容易さを第一としている。そのため、複数の構文を設定することなく十分な機能を提供できるよう、多くの言語において文として扱うような条件分岐等を関数によって実現している。変数の代入も式として扱われるため、式文を除けば文に当たるのは関数定義と、pyfuncと呼ばれる関数を読み込むpyfunc文しかない。

　上の特徴のため、pyfuncなる機能を用いなければ変数代入や演算以外に実行可能な操作がない。従って、pyfuncと呼ばれるものがTori-において重要な役割を果たす。入出力や数値変換から、条件分岐や繰り返しなどのフロー制御まで幅広い機能がpyfuncによって提供される。その名の通り、pyfuncはPython実装ではPythonによって実装されていた。本実装ではCで実装されているが、名前は据え置きとした。

## 言語仕様

### 型

　Tori-で扱われる値は、`NUM`, `STR`, `BOOLEAN`に分類される(NAMEという型も設定されていたが、単に識別子のことを指していただけであり、今回の実装では型として扱わない)。各型の特徴は以下の通り。

#### NUM

　整数と小数の両方を含む数値型。小数について、整数部が0の場合は`0.1`と表記する代わりに`.1`とすることができる。

#### STR

　文字列型。ダブルクォーテーションで文字の並びを囲む事によって定義される。ダブルクォーテーションの代わりにシングルクォーテーションなどの記号を用いることはできない。

　文字列同士は、`"Hello" + " " + "World!"`のように`+`記号を使うことにより連結することができる。また、文字列に対し右から整数値を掛け合わせることで、その文字列を掛けた数の回数分繰り返すことができる。

#### BOOLEAN

　真偽値型。`true`あるいは`false`をグレイブアクセント(``)で囲むことによって定義される。Python版のドキュメントには、`non`なる値も記載されているが、実装されていないためここでは省く。

### 演算子

#### 算術演算子

`a + b`: `a`と`b`の和を返す。

`a - b`: `a`と`b`の差を返す。

`a * b`: `a`と`b`の積を返す。

`a / b`: `a`と`b`の商を返す。

`a % b`: `a`を`b`で割った余りを返す。

`a ** b`: `a`の`b`乗を返す(Python版のドキュメントには記載がないが、実装されている)。

#### 比較演算子

`a == b`: `a`と`b`が等しければ`true`を返し、そうでなければ`false`を返す。

`a != b`: `a`と`b`が等しくなければ`true`を返し、そうでなければ`false`を返す。

 `a < b`: `a`が`b`より小さければ`true`を返し、そうでなければ`false`を返す。

 `a > b`: `a`が`b`より大きければ`true`を返し、そうでなければ`false`を返す。

`a <= b`: `a`が`b`以下ならば`true`を返し、そうでなければ`false`を返す。

`a >= b`: `a`が`b`以上ならば`true`を返し、そうでなければ`false`を返す。

#### 代入演算子

`a = b`: `a`に`b`を代入する。`a`には変数を指定し、`b`は式とする。再代入も可能であり、変数の型は固定されない。

`a += b`: `a = a + b`の省略表現。 

`a -= b`: `a = a - b`の省略表現。 

`a *= b`: `a = a * b`の省略表現。 

`a /= b`: `a = a / b`の省略表現。 

`a %= b`: `a = a % b`の省略表現(Python版ではドキュメントの記載、実装ともになし)。 

`a **= b`: `a = a ** b`の省略表現(Python版ではドキュメントの記載、実装ともになし)。  
